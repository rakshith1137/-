<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shivaratri DP Frame</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    font-family: sans-serif;
    background: #111;
    color: white;
    text-align: center;
  }
  canvas {
    width: 100%;
    max-width: 420px;
    margin-top: 10px;
  }
  input, button {
    margin: 10px;
    padding: 10px;
    font-size: 16px;
  }
</style>
</head>

<body>

<h3>üïâÔ∏è Shivaratri DP Generator</h3>

<input type="file" id="upload" accept="image/*"><br>

<canvas id="canvas" width="1080" height="1080"></canvas><br>

<button onclick="download()">Download DP</button>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const frame = new Image();
frame.src = "frame.jpeg";

/* =========================
   üîß EASY ADJUST CONTROLS
   ========================= */
let PHOTO_X = 620;   // ‚Üê ‚Üí move
let PHOTO_Y = 390;   // ‚Üë ‚Üì move
let PHOTO_W = 340;   // width
let PHOTO_H = 350;   // height
let CORNER_RADIUS = 30;
/* ========================= */

frame.onload = () => {
  ctx.drawImage(frame, 0, 0, canvas.width, canvas.height);
};

document.getElementById("upload").addEventListener("change", e => {
  const img = new Image();
  img.src = URL.createObjectURL(e.target.files[0]);

  img.onload = () => {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // draw frame first
    ctx.drawImage(frame, 0, 0, canvas.width, canvas.height);

    // crop square from user image (WhatsApp DP style)
    const size = Math.min(img.width, img.height);
    const sx = (img.width - size) / 2;
    const sy = (img.height - size) / 2;

    ctx.save();
    ctx.beginPath();
    ctx.roundRect(
      PHOTO_X,
      PHOTO_Y,
      PHOTO_W,
      PHOTO_H,
      CORNER_RADIUS
    );
    ctx.clip();

    ctx.drawImage(
      img,
      sx, sy, size, size,
      PHOTO_X, PHOTO_Y,
      PHOTO_W, PHOTO_H
    );

    ctx.restore();
  };
});

function download(){
  const a = document.createElement("a");
  a.download = "shivaratri-dp.png";
  a.href = canvas.toDataURL("image/png");
  a.click();
}
</script>

</body>
</html>

