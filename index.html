<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shivaratri DP Frame</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    background: #111;
    color: white;
    text-align: center;
  }
  canvas {
    width: 100%;
    max-width: 420px;
    margin-top: 10px;
  }
  input, button {
    margin: 10px;
    padding: 10px;
    font-size: 16px;
  }
</style>
</head>
<body>

<h3>üïâÔ∏è Shivaratri DP Generator</h3>

<input type="file" id="upload" accept="image/*">
<br>
<canvas id="canvas" width="1080" height="1080"></canvas>
<br>
<button onclick="download()">Download DP</button>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const frame = new Image();
frame.src = "frame.jpeg"; // your uploaded frame image

frame.onload = () => {
  ctx.drawImage(frame, 0, 0, canvas.width, canvas.height);
};

document.getElementById("upload").addEventListener("change", e => {
  const img = new Image();
  img.src = URL.createObjectURL(e.target.files[0]);

  img.onload = () => {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // ---- PHOTO AREA COORDINATES (adjust if needed) ----
    const x = 650;
    const y = 360;
    const w = 340;
    const h = 350;

    // draw frame
    ctx.drawImage(frame, 0, 0, canvas.width, canvas.height);

    // crop square from user image
    const size = Math.min(img.width, img.height);
    const sx = (img.width - size) / 2;
    const sy = (img.height - size) / 2;

    ctx.save();
    ctx.beginPath();
    ctx.roundRect(x, y, w, h, 30);
    ctx.clip();

    ctx.drawImage(img, sx, sy, size, size, x, y, w, h);
    ctx.restore();
  };
});

function download(){
  const a = document.createElement("a");
  a.download = "shivaratri-dp.png";
  a.href = canvas.toDataURL("image/png");
  a.click();
}
</script>

</body>
</html>
